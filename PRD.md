# AI 기반 글로벌 주식 투자 분석 및 투자 습관 교정 플랫폼

## 1. 프로젝트 개요

- **프로젝트명:** WiseInvest (가칭)
- **프레임워크:** Ruby on Rails 8
- **목적:** 한/미 상장 주식에 대한 세계적 투자 전문가들의 관점 분석을 제공하고, 사용자의 실제 투자 결과와 설문 답변을 비교 분석하여 잘못된 투자 습관을 교정하고 최적의 투자 전략을 제안함.

### 핵심 가치

- 데이터 기반의 객관적 병렬 분석 (Expert Parallel Analysis)
- 말과 행동의 괴리를 바로잡는 투자 성향 보정 (Behavioral Correction)
- 투자 확신 및 정보 신뢰도 향상

---

## 2. 주요 기능 (Key Features)

### 2.1. 전문가 관점 병렬 분석 엔진

- **글로벌 대가들의 알고리즘:** 워런 버핏, 피터 린치, 레이 달리오 등 대가들의 투자 철학을 수치화한 체크리스트 기반 분석.
- **한/미 시장 통합 분석:** KRX(한국) 및 NYSE/NASDAQ(미국) 데이터를 표준화하여 투자 매력도와 리스크 점수 제공.
- **투자 확신 지수 (Confidence Score):** 여러 전문가 모델의 일치도를 바탕으로 투자 신뢰도를 시각화.

### 2.2. 동적 투자 성향 분석 및 교정 시스템

- **초기 가설 수립:** 8~10개의 질문을 통해 사용자가 인지하는 본인의 투자 성향(자아상) 파악.
- **실제 투자 기록 분석:** 사용자가 입력한 실제 매수/매도 데이터(수익, 손실, 보유 기간 등) 수집.
- **인지 부조화 교정 로직:** 설문 답변(가설)과 실제 매매 데이터(실제) 간의 괴리를 분석하여 '진짜 투자 성향'으로 프로필 업데이트.
- **맞춤형 피드백:** 발견된 투자 오류(뇌동매매, 손실 회피 편향 등)에 대한 전문가 관점의 조언 및 개선책 제안.

### 2.3. 투자 별점 및 주관적 피드백 시스템 (Sentiment Tracking)

- **사전 별점 (Pre-Investment Rating):** 종목 검색 직후, 매수 전 사용자가 느끼는 매력도를 별점(1~5점)으로 기록.
- **기대 이유 기록:** 매수 시점의 주된 감정이나 근거를 태그 형태로 선택 (예: `#차트우상향` `#저평가` `#뉴스호재` `#지인추천`).
- **사후 결과 대조:** 실제 수익률이 확정된 후, '과거의 별점'과 '현재의 결과'를 대조하여 "자신감이 과했는지(Overconfidence)" 혹은 "공포에 눌렸는지"를 시각화.

### 2.4. 성향 분석 엔진 연동 (Correction Logic)

별점 데이터를 활용해 다음과 같은 **'투자 지침'**을 자동 생성합니다.

- **[과잉 확신 감지]:** 시스템 점수는 1점(위험)인데 사용자가 별점 5점을 준 경우
  > "사용자님은 특정 뉴스로 인해 객관적 지표를 간과하는 경향이 있습니다. 대가들의 리스크 체크리스트를 다시 확인하세요."
- **[자기 객관화 지수]:** 사용자의 별점과 실제 수익률의 상관관계가 높을수록 '자기 객관화가 잘 된 투자자'로 분류하여 신뢰도 가중치 부여.

### 2.5. Rails 8 Hotwire를 활용한 피드백 루프

사용자가 별점을 매기는 순간, Turbo Streams를 통해 실시간으로 해당 종목의 '전문가 종합 점수(의견)' 또는 다른 사용자의 별점과 비교 레이아웃을 띄워주어 즉각적인 자기 검열(Self-Correction) 기회를 제공합니다.

---

## 3. 기술 스택 (Technical Stack - Rails 8 기반)

| 구분 | 기술 |
|------|------|
| **Backend** | Ruby on Rails 8 (Built-in Authentication, Solid Queue, Solid Cache 활용) |
| **Frontend** | Hotwire (Turbo, Stimulus) 및 Tailwind CSS (빠르고 가벼운 UI/UX) |
| **Database** | PostgreSQL |
| **Background Processing** | Solid Queue (Rails 8 기본 엔진으로 분석 로직 처리) |
| **Deployment/Infra** | Kamal 2 (컨테이너 기반 배포), Thruster (HTTP/2 프록시) |
| **External API** | 한국/미국 주식 재무 및 시세 데이터 (OpenDart, yfinance 등), AI 엔진 (OpenAI API - 투자 리포트 요약 및 성향 교정 텍스트 생성) |

---

## 4. 데이터 모델링 핵심 요소

| 모델 | 설명 |
|------|------|
| **User** | 프로필, 설문 기반 투자 성향 지표 |
| **InvestmentProfile** | 설문 점수와 실제 매매 데이터가 결합된 최종 보정 점수 |
| **InvestmentRecord** | 종목 정보, 매수/매가, 투자 이유(정성적 데이터), 수익률 |
| **AnalysisReport** | 전문가 모델별 분석 결과 및 AI가 생성한 개인화된 교정 리포트 |

---

## 5. 구현 로드맵 (Roadmap)

### Phase 1: Foundation (Rails 8 뼈대)

- Rails 8 기본 설정 및 사용자 인증 시스템 구축
- 기본 설문지 기능 및 초기 투자 성향 모델링

### Phase 2: Analysis Engine (데이터 연동)

- 한/미 주식 API 연동 및 전문가 분석 알고리즘(버핏, 린치 등) 1차 구현
- 종목 검색 및 병렬 분석 결과 대시보드 구축

### Phase 3: Correction Loop (보정 로직)

- 실제 투자 기록 입력 기능 개발
- 설문 결과와 실제 데이터 간의 비교 분석 및 성향 보정 알고리즘 적용

### Phase 4: Optimization (고도화)

- AI 기반 맞춤형 투자 조언 자동화
- Kamal 2를 이용한 프로덕션 배포 및 성능 최적화

---

## 6. 특이사항

- 사용자는 설문에서 '보수적'이라고 답해도 실제 '공격적/위험한' 투자를 할 수 있음을 전제로 하며, 모든 시스템 피드백은 **실제 데이터(결과)**를 우선순위에 둠.
- Rails 8의 최신 기능을 최대한 활용하여 외부 종속성(Redis 등)을 최소화한 구조로 설계함.

---

## 7. MVP 정의 (Minimum Viable Product)

### 7.1. MVP 범위

첫 출시 시 포함할 최소 기능을 정의합니다.

| 구분 | MVP 포함 | 향후 확장 |
|------|:--------:|:--------:|
| 시장 | 한국 주식만 | 미국 주식 추가 |
| 전문가 모델 | 워런 버핏 스타일 1개 | 피터 린치, 레이 달리오 등 추가 |
| 투자 기록 입력 | 수동 입력 + CSV 업로드 | 증권사 API 자동 연동 |
| 성향 분석 | 기본 설문(8문항) | 고급 심리 분석 |
| AI 리포트 | 단순 요약 | 개인화된 상세 교정 리포트 |

### 7.2. MVP 핵심 화면 (4개)

1. **홈 대시보드:** 투자 성향 요약, 최근 분석 종목
2. **종목 검색 및 분석:** 버핏 스타일 체크리스트 점수
3. **투자 기록 관리:** 매수/매도 입력, CSV 업로드
4. **성향 리포트:** 설문 vs 실제 투자 비교 시각화

---

## 8. 데이터 소스 및 API 전략

### 8.1. 권장 API

| 시장 | API | 특징 | 비용 |
|------|-----|------|------|
| **한국** | KIS Developers (한국투자증권) | 공식 API, 실시간 시세, 재무정보 | 무료 티어 있음 |
| **한국** | 금융위원회 공공데이터 | 상장사 기본정보, 재무제표 | 무료 |
| **한국** | OpenDart | 공시정보, 재무제표 | 무료 |
| **미국** | Alpha Vantage | 주가, 재무정보, 기술지표 | 무료 (500건/일) |
| **미국** | Polygon.io | 실시간 시세, 과거 데이터 | 유료 (무료 티어 제한적) |
| **미국** | Financial Modeling Prep | 재무제표, 밸류에이션 지표 | 무료 (250건/일) |

### 8.2. 주의사항

- **yfinance:** 비공식 API로 상업적 사용 시 법적 리스크 존재. 개발/테스트 용도로만 사용 권장.
- **API Rate Limit:** 무료 티어 제한을 고려하여 데이터 캐싱 전략 필수 (Solid Cache 활용).

---

## 9. 전문가 분석 알고리즘 상세

### 9.1. 워런 버핏 스타일 (MVP 적용)

가치 투자 철학을 기반으로 한 정량적 체크리스트:

| 지표 | 기준 | 배점 |
|------|------|:----:|
| ROE (자기자본이익률) | ≥ 15% | 20점 |
| 부채비율 | ≤ 50% | 15점 |
| 영업이익률 | ≥ 10% | 15점 |
| 5년 연속 순이익 증가 | Yes/No | 20점 |
| PER (주가수익비율) | ≤ 업종 평균 | 10점 |
| PBR (주가순자산비율) | ≤ 1.5 | 10점 |
| 경제적 해자 (정성 평가) | 브랜드/특허/네트워크 효과 | 10점 |
| **총점** | | **100점** |

**점수 해석:**
- 80점 이상: 매우 매력적
- 60~79점: 관심 종목
- 40~59점: 신중 검토 필요
- 40점 미만: 투자 비권장

### 9.2. 향후 추가 예정 모델

- **피터 린치:** 성장주 중심, PEG 비율, 매출 성장률
- **레이 달리오:** 자산배분, 매크로 경제 지표, 리스크 패리티

---

## 10. 수익 모델 (Business Model)

### 10.1. 단계별 전략

| 단계 | 모델 | 설명 |
|------|------|------|
| **MVP** | 무료 | 사용자 확보 및 피드백 수집 |
| **성장기** | 프리미엄 구독 | 고급 기능 유료화 |
| **확장기** | B2B 라이선스 | 금융사/핀테크 대상 API 제공 |

### 10.2. 프리미엄 기능 (예정)

- 다중 전문가 모델 분석 (버핏 + 린치 + 달리오)
- 실시간 알림 (관심 종목 점수 변동)
- 상세 AI 교정 리포트 (월간/분기별)
- 미국 주식 분석
- 포트폴리오 최적화 제안

---

## 11. 사용자 데이터 입력 전략

### 11.1. 입력 부담 최소화

| 방식 | 우선순위 | 구현 시기 |
|------|:--------:|----------|
| **수동 입력 (간소화 UX)** | 1 | MVP |
| **CSV 파일 업로드** | 2 | MVP |
| **증권사 MTS 스크린샷 OCR** | 3 | Phase 3 |
| **증권사 API 자동 연동** | 4 | Phase 4 |

### 11.2. UX 개선 포인트

- 종목명 자동완성 (검색 시)
- 최근 입력 종목 빠른 선택
- 반복 매매 패턴 템플릿화
- 입력 단계 최소화 (3단계 이내)

---

## 12. 법적 고려사항

### 12.1. 서비스 포지셔닝

> **중요:** 본 서비스는 "투자 자문"이 아닌 **"정보 제공 및 자기 분석 도구"**로 포지셔닝합니다.

- 금융투자업 인가 없이 운영 가능한 범위 내에서 서비스 설계
- 모든 분석 결과에 "투자 권유가 아님" 명시
- 최종 투자 판단은 사용자 책임임을 명확히 고지

### 12.2. 필수 면책 조항

```
본 서비스에서 제공하는 정보는 투자 참고용이며,
투자 권유나 종목 추천을 목적으로 하지 않습니다.
모든 투자 판단과 그에 따른 손익의 책임은 투자자 본인에게 있습니다.
```

### 12.3. 개인정보 보호

- 투자 기록은 민감 정보로 분류하여 암호화 저장
- GDPR/개인정보보호법 준수
- 데이터 삭제 요청 시 완전 삭제 보장

---

## 13. 개발 시작 전 체크리스트

| 순서 | 항목 | 상태 |
|:----:|------|:----:|
| 1 | MVP 기능 목록 최종 확정 | ⬜ |
| 2 | 한국 주식 API 선정 및 테스트 (KIS Developers 가입) | ⬜ |
| 3 | 워런 버핏 분석 알고리즘 세부 설계 | ⬜ |
| 4 | 핵심 4개 화면 와이어프레임 작성 | ⬜ |
| 5 | Rails 8 프로젝트 생성 | ⬜ |
| 6 | 인증 시스템 구현 (Rails 8 Built-in Auth) | ⬜ |
| 7 | 데이터베이스 스키마 설계 | ⬜ |
| 8 | 면책 조항 및 이용약관 초안 작성 | ⬜ |

---

## 14. 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|:------:|----------|
| API Rate Limit 초과 | 높음 | 데이터 캐싱, 요청 큐잉, 유료 플랜 전환 |
| 사용자 입력 데이터 부족 | 중간 | CSV 업로드 우선 제공, 샘플 데이터로 체험 기능 |
| 분석 알고리즘 신뢰도 의문 | 높음 | 백테스팅 결과 공개, 알고리즘 근거 투명하게 설명 |
| 법적 이슈 (투자자문업) | 높음 | 면책조항 강화, 법률 자문 검토 |
| 경쟁 서비스 출현 | 중간 | "행동 교정" 차별점 강화, 빠른 MVP 출시 |
